/*!
* CookieConsent 3.0.1
* https://github.com/orestbida/cookieconsent
* Author Orest Bida
* Released under the MIT License
*/
const e='opt-in',t='opt-out',o='data-category';class n{constructor(){this.t={mode:e,revision:0,autoClearCookies:!0,manageScriptTags:!0,hideFromBots:!0,cookie:{name:'cc_cookie',expiresAfterDays:182,domain:'',path:'/',sameSite:'Lax'}},this.o={i:{},l:'',_:{},u:{},p:{},m:[],C:!1,v:null,S:null,h:null,D:'',T:!0,N:!1,k:!0,j:[],O:!1,A:'',I:!1,R:[],F:[],L:[],M:[],P:!1,J:{},U:{},B:{},G:{},H:{},q:[]},this.K={},this.V={W:'cc:onFirstConsent',X:'cc:onConsent',Y:'cc:onChange'}}}const s=new n,r=(e,t)=>e.indexOf(t),c=(e,t)=>-1!==r(e,t),a=e=>Array.isArray(e),i=e=>'string'==typeof e,l=e=>!!e&&'object'==typeof e&&!a(e),d=e=>'function'==typeof e,f=e=>Object.keys(e),_=e=>Array.from(new Set(e)),u=e=>{const t=document.createElement(e);return'button'===e&&(t.type=e),t},p=(e,t,o)=>e.setAttribute(t,o),m=(e,t,o)=>{e.removeAttribute(o?'data-'+t:t)},g=(e,t,o)=>e.getAttribute(o?'data-'+t:t),C=e=>{if('object'!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());let t=Array.isArray(e)?[]:{};for(let o in e){let n=e[o];t[o]=C(n)}return t},v=()=>{const e={},{R:t,J:o,U:n}=s.o;for(const s of t)e[s]=S(n[s],f(o[s]));return e},y=()=>{const e=s.t.cookie.expiresAfterDays;return d(e)?e(s.o.A):e},S=(e,t)=>{const o=e||[],n=t||[];return o.filter((e=>!c(n,e))).concat(n.filter((e=>!c(o,e))))},h=e=>{s.o.F=_(e),s.o.A=(()=>{let e='custom';const{F:t,R:o,L:n}=s.o,r=t.length;return r===o.length?e='all':r===n.length&&(e='necessary'),e})()},w=(e,t)=>{e&&(t&&(e.tabIndex=-1),e.focus(),t&&e.removeAttribute('tabindex'))},D=(e,t,o)=>{const{Y:n,X:r,W:c,Z:a,$:i,ee:l}=s.K,f=s.V,_={cookie:s.o.p};e===f.W?d(c)&&c(C(_)):e===f.X?d(r)&&r(C(_)):(_.changedCategories=s.o.j,_.changedServices=s.o.G,d(n)&&n(C(_))),((e,t)=>{dispatchEvent(new CustomEvent(e,{detail:t}))})(e,C(_))},b=(e,t)=>{try{return e()}catch(e){return!t&&console.warn('CookieConsent:',e),!1}},T=e=>{const{U:t,G:n,R:r,J:a,q:i,p:l,j:f}=s.o;for(const e of r){const o=n[e]||t[e]||[];for(const n of o){const o=a[e][n];if(!o)continue;const{onAccept:s,onReject:r}=o;!o.te&&c(t[e],n)?(o.te=!0,d(s)&&s()):o.te&&!c(t[e],n)&&(o.te=!1,d(r)&&r())}}if(!s.t.manageScriptTags)return;const _=i,C=e||l.categories||[],v=(e,s)=>{if(s>=e.length)return;const r=i[s];if(r.oe)return v(e,s+1);const a=r.ne,l=r.se,d=r.re,_=c(C,l),y=!!d&&c(t[l],d);if(!d&&!r.ce&&_||!d&&r.ce&&!_&&c(f,l)||d&&!r.ce&&y||d&&r.ce&&!y&&c(n[l]||[],d)){r.oe=!0;const t=g(a,'type',!0);m(a,'type',!!t),m(a,o);let n=g(a,'src',!0);n&&m(a,'src',!0);const c=u('script');c.textContent=a.innerHTML;for(const{nodeName:e}of a.attributes)p(c,e,a[e]||g(a,e));t&&(c.type=t),n?c.src=n:n=a.src;const i=!!n&&(!t||['text/javascript','module'].includes(t));if(i&&(c.onload=c.onerror=()=>{v(e,++s)}),a.replaceWith(c),i)return}v(e,++s)};v(_,0)},N=e=>b((()=>localStorage.removeItem(e))),k=(e,t)=>{if(t instanceof RegExp)return e.filter((e=>t.test(e)));{const o=r(e,t);return o>-1?[e[o]]:[]}},j=e=>{const{hostname:t,protocol:o}=location,{name:n,path:r,domain:a,sameSite:i,useLocalStorage:l}=s.t.cookie,d=e?(()=>{const e=s.o.h,t=e?new Date-e:0;return 864e5*y()-t})():864e5*y(),f=new Date;f.setTime(f.getTime()+d),s.o.p.expirationTime=f.getTime();const _=JSON.stringify(s.o.p);let u=n+'='+encodeURIComponent(_)+(0!==d?'; expires='+f.toUTCString():'')+'; Path='+r+'; SameSite='+i;c(t,'.')&&(u+='; Domain='+a),'https:'===o&&(u+='; Secure'),l?((e,t)=>{b((()=>localStorage.setItem(e,t)))})(n,_):document.cookie=u,s.o.p},x=(e,t,o)=>{if(0===e.length)return;const n=o||s.t.cookie.domain,r=t||s.t.cookie.path,c='www.'===n.slice(0,4),a=c&&n.substring(4),i=(e,t)=>{document.cookie=e+'=; path='+r+(t?'; domain=.'+t:'')+'; expires=Thu, 01 Jan 1970 00:00:01 GMT;'};for(const t of e)i(t),i(t,n),c&&i(t,a)},E=e=>{const t=e||s.t.cookie.name,o=s.t.cookie.useLocalStorage;return((e,t)=>{let o;return o=b((()=>JSON.parse(t?e:decodeURIComponent(e))),!0)||{},o})(o?(n=t,b((()=>localStorage.getItem(n)))||''):O(t,!0),o);var n},O=(e,t)=>{const o=document.cookie.match('(^|;)\\s*'+e+'\\s*=\\s*([^;]+)');return o?t?o.pop():e:''},A=e=>{const t=document.cookie.split(/;\s*/),o=[];for(const n of t){let t=n.split('=')[0];e?b((()=>{e.test(t)&&o.push(t)})):o.push(t)}return o},I=(o,n=[])=>{((e,t)=>{const{R:o,F:n,L:r,ae:l,B:d,M:_,J:u}=s.o;let p=[];if(e){a(e)?p.push(...e):i(e)&&(p='all'===e?o:[e]);for(const e of o)d[e]=c(p,e)?f(u[e]):[]}else p=[...n,..._];p=p.filter((e=>!c(o,e)||!c(t,e))),p.push(...r),h(p)})(o,n),(e=>{const t=s.o,{B:o,L:n,U:r,J:a,R:i}=t,l=i;t.H=C(r);for(const e of l){const s=a[e],i=f(s),l=o[e]&&o[e].length>0,d=c(n,e);if(0!==i.length){if(r[e]=[],d)r[e].push(...i);else if(l){const t=o[e];r[e].push(...t)}else r[e]=t.B[e];r[e]=_(r[e])}}})(),(()=>{const o=s.o;o.j=s.t.mode===t&&o.T?S(o.M,o.F):S(o.F,o.p.categories);let n=o.j.length>0,r=!1;for(const e of o.R)o.G[e]=S(o.U[e],o.H[e]),o.G[e].length>0&&(r=!0);o.S||(o.S=new Date),o.D||(o.D=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))),o.p={categories:C(o.F),revision:s.t.revision,data:o.v,consentTimestamp:o.S.toISOString(),consentId:o.D,services:C(o.U)},o.h&&(o.p.lastConsentTimestamp=o.h.toISOString());let a=!1;const i=n||r;(o.T||i)&&(o.T&&(o.T=!1,a=!0),o.h=o.h?new Date:o.S,o.p.lastConsentTimestamp=o.h.toISOString(),j(),s.t.autoClearCookies&&(a||i)&&(e=>{const t=s.o,o=A(),n=(e=>{const t=s.o;return(e?t.R:t.j).filter((e=>{const o=t.I[e];return!!o&&!o.readOnly&&!!o.autoClear}))})(e);for(const e in t.G)for(const n of t.G[e]){const s=t.J[e][n].cookies;if(!c(t.U[e],n)&&s)for(const e of s){const t=k(o,e.name);x(t,e.path,e.domain)}}for(const s of n){const n=t.I[s].autoClear,r=n&&n.cookies||[],a=c(t.j,s),i=!c(t.F,s),l=a&&i;if(e?i:l){n.reloadPage&&l&&(t.O=!0);for(const e of r){const t=k(o,e.name);x(t,e.path,e.domain)}}}})(a),T()),a&&(D(s.V.W),D(s.V.X),s.t.mode===e)||(i&&D(s.V.Y),o.O&&(o.O=!1,location.reload()))})()},R=e=>{const t=s.o.T?[]:s.o.F;return c(t,e)},F=(e,t)=>{const{R:o,J:n}=s.o;if(!(e&&t&&i(t)&&c(o,t)&&0!==f(n[t]).length))return!1;I()},L=(e,t)=>{const o=s.o.T?[]:s.o.U[t]||[];return c(o,e)},M=e=>''!==O(e,!0),P=(e,t,o)=>{let n=[];const s=e=>{if(i(e)){let t=O(e);''!==t&&n.push(t)}else n.push(...A(e))};if(a(e))for(let t of e)s(t);else s(e);x(n,t,o)},J=()=>{const{A:e,U:t}=s.o,{accepted:o,rejected:n}=(()=>{const{T:e,F:t,R:o}=s.o;return{accepted:t,rejected:e?[]:o.filter((e=>!c(t,e)))}})();return C({acceptType:e,acceptedCategories:o,rejectedCategories:n,acceptedServices:t,rejectedServices:v()})},U=(e,t)=>{let o=document.querySelector('script[src="'+e+'"]');return new Promise((n=>{if(o)return n(!0);if(o=u('script'),l(t))for(const e in t)p(o,e,t[e]);var s,r;o.onload=()=>n(!0),o.onerror=()=>{o.remove(),n(!1)},o.src=e,s=document.head,r=o,s.appendChild(r)}))},B=e=>{let t,o=e.value,n=e.mode,r=!1;const c=s.o;if('update'===n){c.v=t=G('data');const e=typeof t==typeof o;if(e&&'object'==typeof t){!t&&(t={});for(let e in o)t[e]!==o[e]&&(t[e]=o[e],r=!0)}else!e&&t||t===o||(t=o,r=!0)}else t=o,r=!0;return r&&(c.v=t,c.p.data=t,j(!0)),r},G=(e,t)=>{const o=E(t);return e?o[e]:o},H=e=>{const t=s.t,o=s.o.i;return e?t[e]||o[e]:{...t,...o,cookie:{...t.cookie}}},q=()=>!s.o.T,z=async e=>{const{o:n,t:r,V:d}=s,_=window;if(!_._ccRun){if(_._ccRun=!0,(e=>{const{ie:n,t:r,o:a}=s,i=r,d=a,{cookie:_}=i,u=s.K,p=e.cookie,m=e.categories,C=f(m)||[],v=navigator,y=document;n.le=y,_.domain=location.hostname,d.i=e,d.I=m,d.R=C,u.W=e.onFirstConsent,u.X=e.onConsent,u.Y=e.onChange;const{mode:S,autoClearCookies:h,revision:w,manageScriptTags:D,hideFromBots:b}=e;S===t&&(i.mode=S),'boolean'==typeof h&&(i.autoClearCookies=h),'boolean'==typeof D&&(i.manageScriptTags=D),'number'==typeof w&&w>=0&&(i.revision=w,d.N=!0),!1===b&&(i.hideFromBots=!1),!0===i.hideFromBots&&v&&(d.P=v.userAgent&&/bot|crawl|spider|slurp|teoma/i.test(v.userAgent)||v.webdriver),l(p)&&(i.cookie={..._,...p}),i.autoClearCookies,d.N,i.manageScriptTags,(e=>{const{I:t,J:o,U:n,B:r,L:c}=s.o;for(let a of e){const e=t[a],i=e.services||{},d=l(i)&&f(i)||[];o[a]={},n[a]=[],r[a]=[],e.readOnly&&(c.push(a),n[a]=d),s.ie.de[a]={};for(let e of d){const t=i[e];t.te=!1,o[a][e]=t}}})(C),(()=>{if(!s.t.manageScriptTags)return;const e=s.o,t=(n=document,r='script['+o+']',n.querySelectorAll(r));var n,r;for(const n of t){let t=g(n,o),s=n.dataset.service||'',r=!1;if(t&&'!'===t.charAt(0)&&(t=t.slice(1),r=!0),'!'===s.charAt(0)&&(s=s.slice(1),r=!0),c(e.R,t)&&(e.q.push({ne:n,oe:!1,ce:r,se:t,re:s}),s)){const o=e.J[t];o[s]||(o[s]={te:!1})}}})()})(e),n.P)return;if((()=>{const e=s.o,o=s.t,n=E(),{categories:r,services:c,consentId:l,consentTimestamp:d,lastConsentTimestamp:f,data:_,revision:u}=n,p=a(r);e.p=n,e.D=l;const m=!!l&&i(l);e.S=d,e.S&&(e.S=new Date(d)),e.h=f,e.h&&(e.h=new Date(f)),e.v=void 0!==_?_:null,e.N&&m&&u!==o.revision&&(e.k=!1),e.T=!(m&&e.k&&e.S&&e.h&&p),o.cookie.useLocalStorage&&!e.T&&(e.T=(new Date).getTime()>(n.expirationTime||0),e.T&&N(o.cookie.name)),e.T,(()=>{const e=s.o;for(const o of e.R){const n=e.I[o];if(n.readOnly||n.enabled){e.M.push(o);const n=e.J[o]||{};for(let s in n)e.B[o].push(s),e.i.mode===t&&e.U[o].push(s)}}})(),e.T?o.mode===t&&(e.F=[...e.M]):(e.U={...e.U,...c},e.B={...e.U},h([...e.L,...r]))})(),q())return T(),D(d.X);r.mode===t&&T(n.M)}},K=e=>{const{name:t,path:o,domain:r,useLocalStorage:c}=s.t.cookie;e&&(c?N(t):P(t,o,r));for(const{fe:e,_e:t,ue:o}of s.o.m)e.removeEventListener(t,o);const a=new n;for(const e in s)s[e]=a[e];window._ccRun=!1},Q=()=>{const e=s.o;e.pe&&(e.pe=!1,w(s.ie.me,!0),s.ie.ge.classList.remove('show--preferences'),p(s.ie.Ce,'aria-hidden','true'),e.ve?(w(e.ye),e.ye=null):(w(e.Se),e.Se=null),D(s.V.Z))};export{I as acceptCategory,F as acceptService,R as acceptedCategory,L as acceptedService,P as eraseCookies,H as getConfig,G as getCookie,J as getUserPreferences,Q as hideManageByBTSModal,U as loadScript,K as reset,z as run,B as setCookieData,q as validConsent,M as validCookie};
